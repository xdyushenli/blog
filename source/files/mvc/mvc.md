> 数据分为运行时数据（状态数据）和实体数据两种。实体数据是从数据源中获取的，对应数据层。数据源包括交互输入、api等。

> **数据层生产数据，视图层消费数据。**

> **数据层处理原始数据，逻辑层生产运行时数据，视图层消费运行时数据。**

> 我们所指的数据层是指处理、管理静态数据资源的编程层，而非动态的运行时编程层。数据层的编程，形象的说，我们是在进行“壳”的编程，这个“壳”本质目标是为运行时数据塑形，使得运行时数据自身内部拥有某种约束性，以供逻辑层、视图层使用时，符合业务的实际。

> `数据仓库`：处理任何关于数据的细节，如从 api 拉取数据、本地化、state等。视图交互产生的数据也传入数据仓库，由仓库进行处理。视图层直接从数据仓库中取数据就好，无需管数据是哪里来的以及如何存储等细节。

> 数据模型：实现上，可以暴露一些方法，方法内部对 state 进行修改。调用 setState，视图中只调用这些方法，不许调用 setState。

> `DDD`为我们提供了方法论，帮助我们快速理解如何去设计领域模型。

> 开发层面，DDD给我们提出了三个核心对象：
- 实体：用于描述业务的对象。
- 事件：用于描述状态变化信息的对象。
- 服务：用于执行无状态更新的函数集合。

> 在前端语境下，领域模型在代码层面，就是一个 class 类（当然，这是从 java 的面向对象过来的）。而这个 Model 类需要包含对实体的描述，需要实现事件系统，必要的时候需要实现服务（用静态属性即可）。

> **领域模型是对业务对象的纯粹描述，和业务运行过程中的环境无关。**这个定义已经很接近设计模式中的 M 层了。

> 实体模型往往是对某个具体的事物进行抽象描述，但是业务系统中另一个更复杂的对象就是流程。比如办公系统中的审批流，比如电商系统中的订单流程，这些流程不指具体的某个事物，而是一系列实体、行为和逻辑的总和。

> **实际上，流程的本质，是业务时间内实体的进出和实体状态的变化的总和。**事件是保证业务流程形成链状，持续更迭的关键。

> 逻辑层从 Service 中取出数据，作为初始信息传入模型进行实例化，得到模型实例，交给视图层使用。逻辑层是将抽象的静态的数据层进行实例化，得到运行时数据的主要场所。

> **数据层本身并没有状态，只有逻辑层和视图层才有状态。而视图层功能相对单一，即完成界面渲染。因此，逻辑层承担着将数据层的抽象业务转化为运行时数据状态的重要功能。可以说，逻辑层是数据层的末端，但好像又是整个数据层最终能够产生价值的起点。**

> 业务系统前端，可以按照“视图层、逻辑层、数据层”进行结构分层。其中数据层在当下的前端领域被讨论的不多，但在我看来却非常重要。数据层本身也可以分为服务层和模型层，数据从源头（API接口）到数据层，到逻辑层，到视图层，然后在回流回来，形成一个完整的闭环。

> 我们不能一概而论的说前端所有应用都应该遵循这种设计，文章一开始就着重强调过，我们只在业务型前端应用中才会面临是否需要在数据层研究更深的问题。业务型，特别是具有流程的业务型系统，我们不仅要关注数据，而且更要关注真实业务本身，从根本上理解业务实体、规则、逻辑，甚至开发者自己切身去体验一下真实数据环境下业务人员在使用系统时的感受，才能在前端数据层面重新认识系统。我不能保证按照本文所述的方法去设计，就一定能写出明晰，不需要重构，逻辑正确，代码易读的项目，这是我不能保证的。但是，我认为，如果在设计系统之前，如果有过本文所述的所有思考，或许对你的前端代码的设计和管理会有帮助。